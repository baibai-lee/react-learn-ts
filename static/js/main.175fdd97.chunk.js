(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(t,e,n){t.exports=n(17)},16:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(9),c=n.n(r);n(16),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l,u=n(5),i=Object(a.createContext)({}),d=n(1);!function(t){t.INIT_TODO="INIT_TODO",t.INIT_DONE="INIT_DONE",t.ADD_ITEM_TO_TODO="ADD_ITEM_TO_TODO",t.ADD_ITEM_TO_TODO_FROM_DONE="ADD_ITEM_TO_TODO_FROM_DONE",t.UPDATE_TODO="UPDATE_TODO",t.ADD_ITEM_TO_DONE="ADD_ITEM_TO_DONE",t.DEL_ITEM_FROM_TODO="DEL_ITEM_FROM_TODO",t.DEL_ITEM_FROM_DONE="DEL_ITEM_FROM_DONE",t.CLEARALL="CLEARALL",t.INIT_TODO_FLAGS="INIT_TODO_FLAGS",t.UPDATE_TODO_FLAGS="UPDATE_TODO_FLAGS"}(l||(l={}));var O=l;var s={todolist:[],donelist:[],todoFlags:[]},T=function(t){return{type:O.INIT_TODO,data:t}},D=function(t){return{type:O.INIT_DONE,data:t}},E=function(t){return{type:O.INIT_TODO_FLAGS,data:t}},_=function(t){return{type:O.ADD_ITEM_TO_TODO,data:t}},m=function(t){return{type:O.ADD_ITEM_TO_DONE,data:t}},f=function(t){return{type:O.ADD_ITEM_TO_TODO_FROM_DONE,data:t}},p=function(t){return{type:O.DEL_ITEM_FROM_TODO,data:t}},I=function(t){return{type:O.DEL_ITEM_FROM_DONE,data:t}},g=function(t){return{type:O.UPDATE_TODO_FLAGS,data:t}},h=function(t){return{type:O.UPDATE_TODO,data:t}},A=function(){return{type:O.CLEARALL,data:null}},F=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return Object.keys(t).reduce(function(a,o){return a[o]=t[o](e[o],n),a},{})}}({todolist:function(t,e){switch(e.type){case O.INIT_TODO:return e.data;case O.ADD_ITEM_TO_TODO:return[e.data].concat(Object(d.a)(t));case O.ADD_ITEM_TO_TODO_FROM_DONE:return[].concat(Object(d.a)(t),[e.data]);case O.DEL_ITEM_FROM_TODO:return t.filter(function(t,n){return n!==e.data});case O.UPDATE_TODO:return e.data;case O.CLEARALL:return[];default:return t}},donelist:function(t,e){switch(e.type){case O.INIT_DONE:return e.data;case O.ADD_ITEM_TO_DONE:return[e.data].concat(Object(d.a)(t));case O.DEL_ITEM_FROM_DONE:return t.filter(function(t,n){return n!==e.data});case O.CLEARALL:return[];default:return t}},todoFlags:function(t,e){switch(e.type){case O.INIT_TODO_FLAGS:case O.UPDATE_TODO_FLAGS:return e.data;default:return t}}}),b=n(2),v=n(3),y=n(6),N=n(4),j=n(7),L=function(t){var e=function(e){function n(){return Object(b.a)(this,n),Object(y.a)(this,Object(N.a)(n).apply(this,arguments))}return Object(j.a)(n,e),Object(v.a)(n,[{key:"render",value:function(){var e=this.context.data.todoFlags,n=this.context.actions,a=n.addItemToTodo,r=n.updateTodoFlags;return o.a.createElement(t,{todoFlags:e,addItemToTodo:a,updateTodoFlags:r})}}]),n}(o.a.Component);return e.contextType=i,e}(function(t){var e=t.todoFlags,n=t.addItemToTodo,r=t.updateTodoFlags,c=Object(a.useState)(""),l=Object(u.a)(c,2),i=l[0],O=l[1];return o.a.createElement("header",null,o.a.createElement("section",{className:"header-form"},o.a.createElement("form",{onSubmit:function(t){var a=i.trim();if(!a)return alert("\u4e0d\u53ef\u4ee5\u8f93\u5165\u7a7a\u503c\u54e6~");var o=[!0].concat(Object(d.a)(e));r(o),n(a),O(""),t.preventDefault()}},o.a.createElement("label",null,"TodoList"),o.a.createElement("input",{type:"text",placeholder:" \u6dfb\u52a0todo",value:i,onChange:function(t){O(t.target.value)}}))))}),M=function(t){var e=function(e){function n(){return Object(b.a)(this,n),Object(y.a)(this,Object(N.a)(n).apply(this,arguments))}return Object(j.a)(n,e),Object(v.a)(n,[{key:"render",value:function(){var e=this.context.data,n=e.todolist,a=e.donelist,r=e.todoFlags,c=this.context.actions,l=c.initTodo,u=c.initDone,i=c.initTodoFlags,d=c.addItemToDone,O=c.reAddItemToTodo,s=c.delItemFromTodo,T=c.delItemFromDone,D=c.updateTodo,E=c.updateTodoFlags;return o.a.createElement(t,{todolist:n,donelist:a,todoFlags:r,initTodo:l,initDone:u,initTodoFlags:i,addItemToDone:d,reAddItemToTodo:O,delItemFromTodo:s,delItemFromDone:T,updateTodo:D,updateTodoFlags:E})}}]),n}(o.a.Component);return e.contextType=i,e}(function(t){var e=Object(a.useState)(""),n=Object(u.a)(e,2),r=n[0],c=n[1],l=t.todolist,i=t.donelist,O=t.todoFlags,s=t.initTodo,T=t.initDone,D=t.initTodoFlags,E=t.addItemToDone,_=t.reAddItemToTodo,m=t.delItemFromTodo,f=t.delItemFromDone,p=t.updateTodo,I=t.updateTodoFlags,g=function(t){var e=Object(d.a)(O);e[t]=!e[t],I(e)},h=function(t){c(t.currentTarget.value)};return Object(a.useEffect)(function(){try{var t=JSON.parse(String(localStorage.getItem("todolist")))||[],e=JSON.parse(String(localStorage.getItem("donelist")))||[],n=new Array(t.length).fill(!0);D(n),s(t),T(e)}catch(a){console.log(a)}console.log("list mounted")},[]),Object(a.useEffect)(function(){localStorage.setItem("todolist",JSON.stringify(l)),localStorage.setItem("donelist",JSON.stringify(i))}),Object(a.useEffect)(function(){console.log("todolist.length :",l.length)},[l.length]),o.a.createElement("section",{className:"main-list-container"},o.a.createElement("section",{className:"main-list"},o.a.createElement("h2",null,"\u6b63\u5728\u8fdb\u884c",o.a.createElement("span",{className:"listcount"},l.length)),o.a.createElement("ul",null,l.map(function(t,e){return o.a.createElement("li",{className:"todolist",key:e,draggable:!0},o.a.createElement("input",{type:"checkbox",checked:!1,readOnly:!0,onClick:function(){return function(t){var e=l[t];E(e),m(t);var n=Object(d.a)(O);n.pop(),I(n)}(e)}}),O[e]?o.a.createElement("span",{style:{width:"400px"},onClick:function(){return function(t){g(t),c(l[t])}(e)}},t):o.a.createElement("input",{type:"text",style:{width:"400px"},autoFocus:!0,value:r,onChange:h,onBlur:function(){return function(t){if(g(t),l[t]!==r){var e=Object(d.a)(l);e[t]=r,p(e)}}(e)}}),o.a.createElement("a",{onClick:function(){return function(t){m(t);var e=Object(d.a)(O);e.pop(),I(e)}(e)}},"-"))})),o.a.createElement("h2",null,"\u5df2\u7ecf\u5b8c\u6210",o.a.createElement("span",{className:"listcount"},i.length)),o.a.createElement("ul",null,i.map(function(t,e){return o.a.createElement("li",{className:"donelist",key:e},o.a.createElement("input",{type:"checkbox",checked:!0,readOnly:!0,onClick:function(){return function(t){var e=[].concat(Object(d.a)(O),[!0]);I(e);var n=i[t];_(n),f(t)}(e)}}),o.a.createElement("span",null,t),o.a.createElement("a",{onClick:function(){return function(t){f(t)}(e)}},"-"))}))))}),S=function(t){var e=function(e){function n(){return Object(b.a)(this,n),Object(y.a)(this,Object(N.a)(n).apply(this,arguments))}return Object(j.a)(n,e),Object(v.a)(n,[{key:"render",value:function(){var e=this.context.actions.clearAll;return o.a.createElement(t,{clearAll:e})}}]),n}(o.a.Component);return e.contextType=i,e}(function(t){return o.a.createElement("footer",null,o.a.createElement("span",null,"Copyright \xa9 2019 lizhan1@xiaomi.com"),o.a.createElement("span",{onClick:function(){t.clearAll()}},o.a.createElement("a",{href:"#"},"clear")))}),k=function(){var t=Object(a.useReducer)(F,s),e=Object(u.a)(t,2),n=e[0],r=e[1],c={initTodo:function(t){return r(T(t))},initDone:function(t){return r(D(t))},initTodoFlags:function(t){return r(E(t))},addItemToTodo:function(t){return r(_(t))},addItemToDone:function(t){return r(m(t))},reAddItemToTodo:function(t){return r(f(t))},delItemFromTodo:function(t){return r(p(t))},delItemFromDone:function(t){return r(I(t))},updateTodoFlags:function(t){return r(g(t))},updateTodo:function(t){return r(h(t))},clearAll:function(){return r(A())}};return o.a.createElement(i.Provider,{value:{data:n,actions:c}},o.a.createElement("div",{className:"App"},o.a.createElement(L,null),o.a.createElement(M,null),o.a.createElement(S,null)))};c.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.175fdd97.chunk.js.map